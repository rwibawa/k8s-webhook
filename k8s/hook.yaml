apiVersion: admissionregistration.k8s.io/v1beta1
kind: MutatingWebhookConfiguration
metadata:
  name: webhook
webhooks:
  - name: webhook-service.default.svc
    failurePolicy: Fail
    clientConfig:
      service:
        name: webhook-service
        namespace: default
        path: "/mutate"
      #this is base64 encode of rootCA.crt `cat rootCA.crt | base64 | tr -d '\n'`
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUdEakNDQS9hZ0F3SUJBZ0lKQU9zTGpOaFJ6VU9wTUEwR0NTcUdTSWIzRFFFQkN3VUFNSUdiTVFzd0NRWUQKVlFRR0V3SlZVekVUTUJFR0ExVUVDQXdLVG1WM0lFcGxjbk5sZVRFVE1CRUdBMVVFQnd3S1VISnBibU5sZEc5dQpJREVTTUJBR0ExVUVDZ3dKUkc5M0lFcHZibVZ6TVF3d0NnWURWUVFMREFOUVNVSXhGakFVQmdOVkJBTU1EU291ClpHVm1ZWFZzZEM1emRtTXhLREFtQmdrcWhraUc5dzBCQ1FFV0dYTmpiM1IwTG5KaGFHNWxja0JrYjNkcWIyNWwKY3k1amIyMHdIaGNOTVRneE1qRTFNak0wTlRNeldoY05NakV4TURBME1qTTBOVE16V2pDQm16RUxNQWtHQTFVRQpCaE1DVlZNeEV6QVJCZ05WQkFnTUNrNWxkeUJLWlhKelpYa3hFekFSQmdOVkJBY01DbEJ5YVc1alpYUnZiaUF4CkVqQVFCZ05WQkFvTUNVUnZkeUJLYjI1bGN6RU1NQW9HQTFVRUN3d0RVRWxDTVJZd0ZBWURWUVFEREEwcUxtUmwKWm1GMWJIUXVjM1pqTVNnd0pnWUpLb1pJaHZjTkFRa0JGaGx6WTI5MGRDNXlZV2h1WlhKQVpHOTNhbTl1WlhNdQpZMjl0TUlJQ0lqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FnOEFNSUlDQ2dLQ0FnRUF2bkIyZnA4eHo4VVNKaEJUCkhtZy8wbWQ4TG9rOWM5NTlHTjkyYkRqSnc5enhCRUV6Q0t0U3ZKYVA0S09HaWRJc0R0aVRqdXhlSjh5U2VYQ2gKWGllSWJqNnpYRVZBVmNTdU1oakh2ZjhvWi96YkIxR2NIZEtLYmloRHAva0hLc2FLTUY2aERlblMrOWljU2hYeQp1Ry9OVzdFbGJzL2JLVC84VytaSCtWK3RXWHBrNG9aK2xPR0FvcVQ5bXhYZW5DWWNFSFRvYjBJVi9NTUNmQXdrCkpaOC9WV3lLekhCTmdQZW5zZDlXRHB1VkF6Uy9LSlhSeHFaMFRFOUJOc2Y1bWs0NTdzNk41SXBKKzExZjZrTlUKTVB3T082Y0RiTUdmWkFsd0ZwaWw3c0tOSlFMZXM1U3AvNUpxZWdGN1Ewb3k5WHVUNzRtM2VuVDVlbG93eUxnZwpsYm1ZWmxKTnVQeFQ5cjZLWDdzQlJNRkxWMzdqeTQ1NDNkZWpvRlNoRjhjL0JiNW9Mb1JobkEwTlZuOWljZ0krCldqaWRYRTZWeVh3RTQ2cDNPcy9GV2xRNGRKNWx2eUl0ajJFNkdhdEVUZkxsb3MyeWdDK084MVNKOEdOSENTYjQKUExlZEVhNllFL041TW5rNkZrSVprK3cxUzVoK1VvSEJEblFVM0VGTnRoU01sR0NzN2svS1VnVlhZQzQzeC9wbgppTzJucEVVOVBKQXBIa0p6SmE5Q1lQRGhlZ1AxMlA5Vlg3K0JKTmw1dnZ2UEFYdkJ0U3p0bVNXMU9MRmMzZ0k5CjlDaHU3MmFRWU5za2M3N2NvUkZOTFMzZnhlbGRhb0pyZnFpTEZ6VmhGcEZObDZIT0ZzMVc2WkhKWSsybm5RMDAKQUptbmR0YmcwZXdOZGRzWWgzTGl1YzdaZXo4Q0F3RUFBYU5UTUZFd0hRWURWUjBPQkJZRUZMSnFuU0IyVW4wegptMkp2M0tyRDZ6R0xQbExkTUI4R0ExVWRJd1FZTUJhQUZMSnFuU0IyVW4wem0ySnYzS3JENnpHTFBsTGRNQThHCkExVWRFd0VCL3dRRk1BTUJBZjh3RFFZSktvWklodmNOQVFFTEJRQURnZ0lCQUs0MFp1OWYvaVBCdDlYWjhZQ2QKbnJPWE5KUndPNzZNajRRWE4zSWJxZ1UzM2FXMHQydlVaUUNwSzl6NkExOXJPNkcyVGVLQ3ZTNHNMc09jcTJITwpqVTgwa3JvMW1pTFFBQnRjWk1wajFLUi9Zd2FIM1NSTnYwQ1VtZDZDRTZidWltelB6Z1MzUkJwMzBlcnU2QXU2CnZ0TElKR3V3V29lQmhUVWVycDFUVlJKcEtjRVIxdFZGK1J2MkN2Vng3eGc1VEJIV2NXeDFTWUFwN3dzUWVhbGwKUHhKaENWR0RhaCsrTVpCa2toc0dDaW9jWXk2cU9TTUZTeXhFYWRIM1lNblB4Qm1nMDkvT2Y5Rk00endIWlF2TQpEMDRYU3Z2bUdqSGpYTjZpTzlSQmtqZGVlNzZHeUV5SHhodkQ3WjZ5SEc4YmpleFFLNjFvSWJtMTZTOUxaV3RNCmFRQzFvSTlFNXU1QjJ6WS9QL2g0WjFsQTlqQ0s3Q3JBb3V3Q2lxNU53R1RCOEYvQlFqWml2OGFqcCsreXNhdUEKTHNMZStONGoxUzVMWnoranNWN0l1SUo3QUVxdVFoYmllUy9NdWYzalJjbVR2YkFua2Q5OWw5WEZCRkY2Qlc0Nwpzb21reEQrbURjNjI4VzVRbytTZ0dJb3lZUEVNSlBFeE5QNUVneDVZajhmRGZ6QUUzdlA1Q2IwOW1maEhqNy95CkZPUHNNWUJYb1ZaYXdiYWYwYmVqNjNUY1hLdkFkVWR4V0Q2Q2RBSTY2NFkvQjUzT3llNzdMeTQvTEx6U3dzLzgKQnNtTENDQ3RMRUtpU01mOVRISmIzZXVFTDY1eFc0UEFaQzJNZCtadkxmMmdDdTR0QmFONDlMOWl0RkpVR2lQTApXVUdiRlV5dWFkaWRKSFhXano0WWU4VzUKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="
    rules:
      - operations: [ "CREATE" ]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
